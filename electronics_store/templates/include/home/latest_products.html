{% load static %}
{% load static i18n %}

<section id="latest_products">
    <div class="latest_products web_size">
        <h2>New arrivals</h2>
        <div class="swiper latestProdSwiper">
            <div class="swiper-wrapper">
                {% for product in newest_products  %}
                    {% if product.in_stock %}
                        <div class="product swiper-slide">
                                <button id="selected_like"  data-id="{{ product.id }}" data-product-name="{{ product.name }}">
                                <svg
                                    width="17"
                                    height="14"
                                    viewBox="0 0 17 14"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                    d="M15.4479 1.50665C15.0213 1.07998 14.5324 0.759982 13.9813 0.546648C13.4301 0.333315 12.8524 0.226648 12.2479 0.226648C11.6435 0.226648 11.0746 0.333315 10.5413 0.546648C10.0079 0.759982 9.52792 1.07998 9.10125 1.50665L8.78125 1.77332L8.46125 1.45332C8.07014 1.0622 7.59903 0.751093 7.04792 0.519982C6.49681 0.288871 5.91903 0.173315 5.31458 0.173315C4.71014 0.173315 4.13236 0.288871 3.58125 0.519982C3.03014 0.751093 2.54125 1.07109 2.11458 1.47998C1.68792 1.88887 1.35903 2.35998 1.12792 2.89332C0.896806 3.42665 0.78125 3.97776 0.78125 4.54665C0.78125 5.11554 0.896806 5.66665 1.12792 6.19998C1.35903 6.73332 1.68792 7.21332 2.11458 7.63998L8.30125 13.6133C8.44347 13.72 8.60347 13.7733 8.78125 13.7733C8.95903 13.7733 9.10125 13.72 9.20792 13.6133L15.4479 7.63998C15.8746 7.21332 16.2035 6.7422 16.4346 6.22665C16.6657 5.71109 16.7813 5.15998 16.7813 4.57332C16.7813 3.98665 16.6657 3.42665 16.4346 2.89332C16.2035 2.35998 15.8746 1.89776 15.4479 1.50665ZM12.2479 1.45332C13.1368 1.45332 13.9013 1.75554 14.5413 2.35998C15.1813 2.96443 15.5013 3.7022 15.5013 4.57332C15.5013 5.44443 15.1813 6.1822 14.5413 6.78665L8.78125 12.3333L3.02125 6.73332C2.38125 6.12887 2.06125 5.39998 2.06125 4.54665C2.06125 3.69332 2.37236 2.96443 2.99458 2.35998C3.61681 1.75554 4.38125 1.45332 5.28792 1.45332C6.19458 1.45332 6.96792 1.75554 7.60792 2.35998L8.35458 3.10665C8.46125 3.21332 8.60347 3.26665 8.78125 3.26665C8.95903 3.26665 9.11903 3.21332 9.26125 3.10665L10.0079 2.35998C10.6124 1.75554 11.359 1.45332 12.2479 1.45332Z"
                                    fill="white"
                                    />
                                </svg>
                                </button>
                                <a href="{% url 'products:product_detail' product.slug %}">
                                <div class="product_img">
                                    {% if product.is_top_seller %}
                                    <div class="top_sales">Top sales</div>
                                    {% endif %}
                                    <img src="{% if product.images %}{{ product.images.url }}{% else %}{% static 'assets/placeholder.png' %}{% endif %}" alt="{{ product.name }}" onerror="this.src='{% static 'assets/placeholder.png' %}'" />
                                    {% if product.discount_price %}
                                    <div class="product_discount_percent">
                                        <span>-{{ product.discount_percentage|floatformat:0 }}%</span>
                                    </div>
                                    {% else %}
                                    {% endif %}
                                </div>

                                <div class="product_info">
                                    <div class="ptoduct_price">
                                        {% if product.discount_price %}
                                            <span class=" main_price">{{ product.discount_price }} $</span>
                                            <span class="discount_price">{{ product.price }} $</span>
                                        {% else %}
                                            <span class="main_price">{{ product.price }} $</span>
                                        {% endif %}
                                    </div>
                                    <h3>{{ product.name }}</h3>
                                </div>
                                </a>
                                <button
                                    type="button"
                                    class="add_to_cart"
                                    id="add_to_cart"
                                    value="{{ product.id }}" 
                                >
                                <svg
                                    width="20"
                                    height="18"
                                    viewBox="0 0 20 18"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                    d="M6.06667 17.6C6.51111 17.6 6.9 17.4333 7.23333 17.1C7.56667 16.7666 7.73333 16.3889 7.73333 15.9666C7.73333 15.5444 7.56667 15.1666 7.23333 14.8333C6.9 14.5 6.51111 14.3333 6.06667 14.3333C5.62222 14.3333 5.24444 14.5 4.93333 14.8333C4.62222 15.1666 4.46667 15.5444 4.46667 15.9666C4.46667 16.3889 4.62222 16.7666 4.93333 17.1C5.24444 17.4333 5.62222 17.6 6.06667 17.6ZM19.8 4.06664C19.7111 3.97775 19.6444 3.93331 19.6 3.93331H5.06667C4.88889 3.93331 4.72222 3.87775 4.56667 3.76664C4.41111 3.65553 4.33333 3.51109 4.33333 3.33331L3.93333 0.599976C3.93333 0.46664 3.84444 0.399975 3.66667 0.399975H0.333333C0.111111 0.399975 0 0.511086 0 0.733309V1.39997C0 1.6222 0.111111 1.73331 0.333333 1.73331H2.86667L4.46667 12.8666C4.46667 13 4.57778 13.0666 4.8 13.0666H15.8667C15.9111 13.0666 16 13 16.1333 12.8666L20 4.26664C19.9556 4.26664 19.9111 4.2222 19.8667 4.13331L19.8 4.06664ZM17.5333 6.26664L15.2 11.3333C15.1111 11.6 14.8889 11.7333 14.5333 11.7333H6.2C5.97778 11.7333 5.8 11.6778 5.66667 11.5666C5.53333 11.4555 5.46667 11.3111 5.46667 11.1333L4.8 6.06664C4.8 5.79998 4.86667 5.59997 5 5.46664C5.13333 5.33331 5.28889 5.26664 5.46667 5.26664H16.8667C16.9556 5.26664 17.0667 5.28886 17.2 5.33331C17.3333 5.37775 17.4333 5.44442 17.5 5.53331C17.5667 5.6222 17.6111 5.73331 17.6333 5.86664C17.6556 5.99998 17.6222 6.13331 17.5333 6.26664ZM14.7333 17.6C15.1778 17.6 15.5556 17.4333 15.8667 17.1C16.1778 16.7666 16.3333 16.3889 16.3333 15.9666C16.3333 15.5444 16.1778 15.1666 15.8667 14.8333C15.5556 14.5 15.1778 14.3333 14.7333 14.3333C14.2889 14.3333 13.9 14.5 13.5667 14.8333C13.2333 15.1666 13.0667 15.5444 13.0667 15.9666C13.0667 16.3889 13.2333 16.7666 13.5667 17.1C13.9 17.4333 14.2889 17.6 14.7333 17.6Z"
                                    fill="#F21000"
                                    />
                                </svg>
                                <span>Add to cart</span>
                                </button>
                        </div>
                    {% endif %}
                {% endfor %}
                </div>
            <div class="swiper-pagination"></div>
        </div>
    </div>
</section>
